!function(e){function t(t){for(var a,l,o=t[0],s=t[1],u=t[2],m=0,p=[];m<o.length;m++)l=o[m],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(i&&i(t);p.length;)p.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==r[s]&&(a=!1)}a&&(c.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={0:0},c=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var i=s;c.push([748,2,1]),n()}({559:function(e,t,n){},748:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Me}));n(322),n(256);var a=n(0),r=n.n(a),c=n(95),l=n.n(c),o=n(87),s=n(24),u=n(304),i=n(60),m=n(305),p=n.n(m),E=n(114),f=n(56);E.b.add(f.b,f.a,f.c,f.d,f.e,f.f,f.g,f.h,f.i,f.j);n(559);var d=n(78),h=n(757),b=n(758),v=n(25);function O(){return r.a.createElement(h.a,{bg:"primary"},r.a.createElement(h.a.Brand,{as:o.b,to:"/"},r.a.createElement(v.a,{icon:"lightbulb"})," Hew"),r.a.createElement(h.a.Toggle,null),r.a.createElement(h.a.Collapse,null,r.a.createElement(b.a,null,r.a.createElement(b.a.Link,{as:o.b,to:"/"},r.a.createElement(v.a,{icon:"sliders-h"})," Control"),r.a.createElement(b.a.Link,{as:o.b,to:"/devices"},r.a.createElement(v.a,{icon:"server"})," Devices"))))}var y=n(754),g=n(751),j=n(318),C=n(156),w=n(69),S=n.n(w),_=n(115),D=n.n(_),T=n(759),k=n(756),N=n(752),P=n(753),R=n(317),x=n(157),I=n.n(x);function A(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,c=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==a.return||a.return()}finally{if(l)throw r}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e,t){var n,a={},r=A(t);try{for(r.s();!(n=r.n()).done;){var c=n.value;a[c]="".concat(e,"/").concat(c)}}catch(e){r.e(e)}finally{r.f()}return a}("application",["ADD_DEVICE","ADD_PENDING_REQUEST","APPEND_NETWORK_LOG","CLEAR_NETWORK_LOG","CONTROL_DEVICE","CONTROL_DEVICE_FAILURE","CONTROL_DEVICE_SUCCESS","EDIT_DEVICE","REMOVE_DEVICE","REMOVE_PENDING_REQUEST","SET_BRIGHTNESS","SET_COLOR","SET_PATTERN"]),B=function(e){return{type:M.ADD_DEVICE,device:e}},q=function(e){return{type:M.ADD_PENDING_REQUEST,hostname:e}},U=function(e){return{type:M.APPEND_NETWORK_LOG,message:e}},W=function(){return{type:M.CLEAR_NETWORK_LOG}},H=function(e,t){return{type:M.CONTROL_DEVICE,hostname:e,settings:t}},Q=function(e,t){return{type:M.EDIT_DEVICE,hostname:e,device:t}},K=function(e){return{type:M.REMOVE_DEVICE,hostname:e}},F=function(e){return{type:M.REMOVE_PENDING_REQUEST,hostname:e}},z=function(e){return{type:M.SET_BRIGHTNESS,brightness:e}},J=function(e){return{type:M.SET_COLOR,color:e}},X=function(e){return{type:M.SET_PATTERN,pattern:e}},$={brightness:0,color:{r:0,g:0,b:0},pattern:"Solid",devices:[],networkLog:[],pendingRequests:[]},Y=n(88),Z=function(e){return e.application},ee=Object(Y.a)(Z,(function(e){return e.brightness})),te=Object(Y.a)(Z,(function(e){return e.color})),ne=Object(Y.a)(Z,(function(e){return e.devices})),ae=Object(Y.a)(Z,(function(e){return e.networkLog})),re=Object(Y.a)(Z,(function(e){return e.pattern})),ce=Object(Y.a)(Z,(function(e){return e.pendingRequests}));function le(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,c=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==a.return||a.return()}finally{if(l)throw r}}}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function se(){var e=Object(s.b)(),t=Object(s.c)(ee),n=Object(s.c)(te),c=Object(s.c)(ne),l=Object(s.c)(re),o=Object(s.c)(ce)||[],u=Object(a.useState)("all"),i=D()(u,2),m=i[0],p=i[1],E=Object(a.useState)([]),f=D()(E,2),d=f[0],h=f[1],b=Object(a.useCallback)((function(){var a=[];switch(m){case"all":a=c;break;case"some":a=c.filter((function(e){return d.includes(e.hostname)}))}var r,o=le(a);try{for(o.s();!(r=o.n()).done;){var s=r.value;e(H(s.hostname,{r:n.r,g:n.g,b:n.b,br:parseInt(t,10),p:l}))}}catch(e){o.e(e)}finally{o.f()}}),[t,n,c,e,l,m,d]),O=Object(a.useCallback)((function(e){return p(e.target.value)}),[p]),y=Object(a.useCallback)((function(t){return e(z(t.target.value))}),[e]),C=Object(a.useCallback)((function(t){return e(J(t.rgb))}),[e]),w=Object(a.useCallback)((function(t){return e(X(t.target.value))}),[e]),_=Object(a.useCallback)((function(e){return h(S()(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})))}),[h]),x="success";t>=200?x="danger":t>=160&&(x="warning");var I=o.length>0,A={disabled:I,icon:I?"spinner":"upload",spin:I,variant:I?"warning":"success"};return r.a.createElement(T.a,{className:"mt-2"},r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Title,null,"Update Settings"),r.a.createElement(k.a,null,r.a.createElement(g.a,null,r.a.createElement(j.a,{md:4},r.a.createElement(k.a.Group,{as:j.a},r.a.createElement(k.a.Label,null,"Device(s)"),r.a.createElement(g.a,null,r.a.createElement(j.a,null,r.a.createElement(k.a.Check,{type:"radio",inline:!0,name:"recipientType",value:"all",label:"All",checked:"all"===m,onChange:O}))),r.a.createElement(g.a,null,r.a.createElement(j.a,null,r.a.createElement(k.a.Check,{type:"radio",inline:!0,name:"recipientType",value:"some",label:"Some",checked:"some"===m,onChange:O}))),"some"===m?r.a.createElement(k.a.Control,{as:"select",multiple:!0,onChange:_,value:d},c.map((function(e){return r.a.createElement("option",{key:e.hostname,value:e.hostname},e.hostname)}))):null),r.a.createElement(k.a.Group,{as:j.a},r.a.createElement(k.a.Label,null,"Pattern"),r.a.createElement(k.a.Control,{as:"select",onChange:w},r.a.createElement("option",{value:"SOLID"},"Solid"),r.a.createElement("option",{value:"MARQUEE"},"Marquee"))),r.a.createElement(k.a.Group,{as:j.a},r.a.createElement(k.a.Label,null,"Brightness"),r.a.createElement(N.a,null,r.a.createElement(k.a.Control,{className:"hew-range",type:"range",min:"0",max:"255",step:"5",value:t,onChange:y}),r.a.createElement(N.a.Append,null,r.a.createElement(N.a.Text,{className:"bg-".concat(x," text-dark")},Math.floor(t/255*100),"%"))),t>=160&&t<200?r.a.createElement("span",{className:"text-warning"},"Prolonged use at this power level will reduce lifespan."):null,t>=200?r.a.createElement("span",{className:"text-danger"},"Warning! Do not look directly at LEDs!"):null)),r.a.createElement(k.a.Group,{as:j.a,md:4},r.a.createElement(k.a.Label,null,"Color"),r.a.createElement(R.SketchPicker,{width:"90%",disableAlpha:!0,color:n,onChangeComplete:C})),r.a.createElement(j.a,{md:4},r.a.createElement(P.a,{disabled:A.disabled,variant:A.variant,onClick:b,block:!0,className:"hew-send","aria-label":"Send",title:"Send"},r.a.createElement(v.a,{icon:A.icon,spin:A.spin,size:"4x"})))))))}var ue=n(755);function ie(){var e=Object(s.b)(),t=Object(s.c)(ae),n=Object(a.useCallback)((function(){return e(W())}),[e]);return r.a.createElement(T.a,{className:"my-4"},r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Title,null,r.a.createElement(g.a,null,r.a.createElement(j.a,{xs:11},"Network Log"),r.a.createElement(j.a,{xs:1,className:"text-right"},r.a.createElement(P.a,{variant:"warning","aria-label":"Clear",title:"Clear",onClick:n},r.a.createElement(v.a,{icon:"eraser"}))))),r.a.createElement(y.a,null,t.length?t.map((function(e){return r.a.createElement(g.a,{key:e.timestamp},r.a.createElement(j.a,{xs:2},Object(ue.a)(e.timestamp,"yyyy-MM-dd HH:mm:ss")),r.a.createElement(j.a,{xs:10},e.message))})):r.a.createElement(g.a,null,r.a.createElement(j.a,null,"No network log entries.")))))}function me(){return r.a.createElement(y.a,null,r.a.createElement(C.a,{title:"Control"}),r.a.createElement(g.a,{className:"mt-4"},r.a.createElement(j.a,null,r.a.createElement("h1",null,r.a.createElement(v.a,{icon:"sliders-h"})," Control"))),r.a.createElement(se,null),r.a.createElement(ie,null))}var pe=n(160);function Ee(){var e=Object(s.c)(ne),t=Object(s.b)(),n=Object(a.useCallback)((function(e){var n=e.hostname,a=e.passphrase;t(B({hostname:"".concat(n,".local"),passphrase:a}))}),[t]),c=Object(a.useCallback)((function(t){var n=t.hostname,a=t.passphrase,r={};return n&&""!==n.trim()||(r.hostname="Hostname is required."),e.find((function(e){return e.hostname==="".concat(n,".local")}))&&(r.hostname="That device already exists."),a?a.length<8&&(r.passphrase="Passphrase must be at least eight characters."):r.passphrase="Passphrase is required.",r}),[e]);return r.a.createElement(T.a,{className:"my-4"},r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Title,null,"Add Device"),r.a.createElement(pe.a,{initialValues:{hostname:"",passphrase:""},validate:c,onSubmit:n},(function(e){var t=e.values,n=e.errors,a=e.touched,c=e.handleChange,l=e.handleBlur,o=e.handleSubmit;return r.a.createElement(k.a,null,r.a.createElement(k.a.Group,null,r.a.createElement(N.a,null,r.a.createElement(k.a.Control,{isInvalid:n.hostname,onChange:c,onBlur:l,name:"hostname",placeholder:"hostname",type:"text",value:t.hostname}),r.a.createElement(N.a.Append,null,r.a.createElement(N.a.Text,null,".local")),a.hostname&&n.hostname&&r.a.createElement(k.a.Control.Feedback,{type:"invalid"},n.hostname))),r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Control,{isInvalid:n.passphrase,onChange:c,onBlur:l,name:"passphrase",type:"text",value:t.passphrase}),a.passphrase&&n.passphrase&&r.a.createElement(k.a.Control.Feedback,{type:"invalid"},n.passphrase)),r.a.createElement(P.a,{onClick:o,variant:"success"},r.a.createElement(v.a,{icon:"plus-circle"})," Add"))}))))}var fe=n(5),de=n.n(fe);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e){var t=e.device,n=t.hostname,c=t.passphrase,l=Object(s.b)(),o=Object(a.useState)(!1),u=D()(o,2),i=u[0],m=u[1],p=Object(a.useCallback)((function(){l(K(n))}),[l,n]),E=Object(a.useCallback)((function(){return m(!i)}),[i,m]),f=Object(a.useCallback)((function(e){l(Q(n,be(be({},t),{},{passphrase:e.passphrase}))),m(!1)}),[t,l,n,m]),d={passphrase:c},h=i?"outline-primary":"primary";return r.a.createElement(T.a,null,r.a.createElement(T.a.Body,null,r.a.createElement(T.a.Title,null,r.a.createElement(g.a,null,r.a.createElement(j.a,null,n),r.a.createElement(j.a,{className:"text-right"},r.a.createElement(P.a,{variant:h,onClick:E},r.a.createElement(v.a,{icon:"edit"}))," ",r.a.createElement(P.a,{variant:"danger",onClick:p,title:"Delete"},r.a.createElement(v.a,{icon:"trash"})))),i&&r.a.createElement(pe.a,{onSubmit:f,validate:function(e){var t=e.passphrase,n={};return t?t.length<8&&(n.password="Passphrase must be at least eight characters."):n.password="Passphrase is required.",n},initialValues:d},(function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return r.a.createElement(k.a,null,r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Label,null,"Passphrase"),r.a.createElement(k.a.Control,{onBlur:a,onChange:n,name:"passphrase",type:"text",value:t.passphrase})),r.a.createElement(P.a,{variant:"success",onClick:c},r.a.createElement(v.a,{icon:"save"})))})))))}function Oe(){var e=Object(s.c)(ne),t=Array.isArray(e)&&e.length;return r.a.createElement(y.a,null,r.a.createElement(C.a,{title:"Devices"}),r.a.createElement(g.a,{className:"mt-4"},r.a.createElement(j.a,null,r.a.createElement("h1",null,r.a.createElement(v.a,{icon:"server"})," Devices"))),r.a.createElement(g.a,null,r.a.createElement(j.a,null,r.a.createElement(Ee,null))),t?r.a.createElement(g.a,null,e.map((function(e){return r.a.createElement(j.a,{key:e.hostname,sm:4},r.a.createElement(ve,{device:e}))}))):null)}function ye(){return r.a.createElement(a.Fragment,null,r.a.createElement(O,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/"},r.a.createElement(me,null)),r.a.createElement(d.a,{exact:!0,path:"/devices"},r.a.createElement(Oe,null))))}ve.propTypes={device:de.a.shape({hostname:de.a.string.isRequired,passphrase:de.a.string.isRequired}).isRequired};var ge=n(61),je=n.n(ge),Ce=n(45),we=n(321),Se=n.n(we),_e=je.a.mark(ke),De=je.a.mark(Ne),Te=je.a.mark(Re);function ke(e){var t,n,a,r,c;return je.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.hostname,n=e.settings,l.prev=1,l.next=4,Object(Ce.e)(ne);case 4:if(a=l.sent,r=a.find((function(e){return e.hostname===t}))){l.next=8;break}throw new Error("Invalid device ".concat(t," specified"));case 8:return l.next=10,Object(Ce.d)(U("Sending update to ".concat(t,"...")));case 10:return l.next=12,Object(Ce.d)(q(t));case 12:return l.next=14,Object(Ce.b)(Se.a,{url:"http://".concat(t,"/"),method:"POST",headers:{Authorization:r.passphrase},data:n});case 14:return c=l.sent,l.next=17,Object(Ce.d)(F(t));case 17:if(200===c.status){l.next=19;break}throw new Error(c.body);case 19:return l.next=21,Object(Ce.d)(U("".concat(t," updated successfully!")));case 21:l.next=29;break;case 23:return l.prev=23,l.t0=l.catch(1),l.next=27,Object(Ce.d)(U("Error updating ".concat(t,": ").concat(l.t0.message)));case 27:return l.next=29,Object(Ce.d)(F(t));case 29:case"end":return l.stop()}}),_e,null,[[1,23]])}function Ne(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce.f)(M.CONTROL_DEVICE,ke);case 2:case"end":return e.stop()}}),De)}var Pe={controlDeviceWatcher:Ne};function Re(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce.a)(Object.values(Pe).map((function(e){return e()})));case 2:case"end":return e.stop()}}),Te)}var xe=je.a.mark(Ie);function Ie(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce.c)(Re);case 2:case"end":return e.stop()}}),xe)}var Ae=Object(i.c)({application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case M.ADD_PENDING_REQUEST:return e.pendingRequests.includes(t.hostname)?e:G(G({},e),{},{pendingRequests:[].concat(S()(e.pendingRequests),[t.hostname])});case M.REMOVE_PENDING_REQUEST:var n=S()(e.pendingRequests),a=n.findIndex((function(e){return e===t.hostname}));return-1===a?e:(n.splice(a,1),G(G({},e),{},{pendingRequests:n}));case M.APPEND_NETWORK_LOG:var r={message:t.message,timestamp:Date.now()},c=[r].concat(S()(e.networkLog)).slice(0,Math.min(20,e.networkLog.length+1));return G(G({},e),{},{networkLog:c});case M.CLEAR_NETWORK_LOG:return G(G({},e),{},{networkLog:[]});case M.ADD_DEVICE:var l=e.devices.find((function(e){return e.hostname===t.device.hostname}));return l?e:G(G({},e),{},{devices:[].concat(S()(e.devices),[t.device])});case M.EDIT_DEVICE:var o=S()(e.devices),s=e.devices.findIndex((function(e){return e.hostname===t.hostname}));return-1===s?e:(o.splice(s,1,t.device),G(G({},e),{},{devices:o}));case M.REMOVE_DEVICE:var u=S()(e.devices),i=e.devices.findIndex((function(e){return e.hostname===t.hostname}));return-1===i?e:(u.splice(i,1),G(G({},e),{},{devices:u}));case M.SET_BRIGHTNESS:return G(G({},e),{},{brightness:t.brightness});case M.SET_COLOR:return G(G({},e),{},{color:t.color});case M.SET_PATTERN:return G(G({},e),{},{pattern:t.pattern});default:return e}}}),Le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,Ve=Object(u.a)(),Ge=Le(Object(i.a)(Ve),p()()),Me=Object(i.e)(Ae,{},Ge);Ve.run(Ie),l.a.render(r.a.createElement(o.a,null,r.a.createElement(s.a,{store:Me},r.a.createElement(ye,null))),document.getElementById("root"));t.default=ye}});