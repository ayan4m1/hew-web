!function(e){function t(t){for(var a,l,o=t[0],s=t[1],u=t[2],m=0,p=[];m<o.length;m++)l=o[m],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(i&&i(t);p.length;)p.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==r[s]&&(a=!1)}a&&(c.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={0:0},c=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var i=s;c.push([748,2,1]),n()}({559:function(e,t,n){},748:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Me}));n(322),n(256);var a=n(0),r=n.n(a),c=n(94),l=n.n(c),o=n(87),s=n(25),u=n(304),i=n(60),m=n(305),p=n.n(m),E=n(115),f=n(56);E.b.add(f.b,f.a,f.c,f.d,f.e,f.f,f.g,f.h,f.i,f.j);n(559);var b=n(78),d=n(757),h=n(758),O=n(24);function v(){return r.a.createElement(d.a,{bg:"primary"},r.a.createElement(d.a.Brand,{as:o.b,to:"/"},r.a.createElement(O.a,{icon:"lightbulb"})," Hew"),r.a.createElement(d.a.Toggle,null),r.a.createElement(d.a.Collapse,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Link,{as:o.b,to:"/"},r.a.createElement(O.a,{icon:"sliders-h"})," Control"),r.a.createElement(h.a.Link,{as:o.b,to:"/devices"},r.a.createElement(O.a,{icon:"server"})," Devices"))))}var y=n(754),g=n(751),j=n(318),w=n(157),C=n(69),D=n.n(C),S=n(116),_=n.n(S),k=n(759),P=n(756),x=n(752),T=n(753),N=n(317),R=n(95),I=n.n(R);function A(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,c=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==a.return||a.return()}finally{if(l)throw r}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e,t){var n,a={},r=A(t);try{for(r.s();!(n=r.n()).done;){var c=n.value;a[c]="".concat(e,"/").concat(c)}}catch(e){r.e(e)}finally{r.f()}return a}("application",["ADD_DEVICE","ADD_PENDING_REQUEST","APPEND_NETWORK_LOG","CLEAR_NETWORK_LOG","CONTROL_DEVICE","CONTROL_DEVICE_FAILURE","CONTROL_DEVICE_SUCCESS","EDIT_DEVICE","REMOVE_DEVICE","REMOVE_PENDING_REQUEST","SET_BRIGHTNESS","SET_COLOR"]),B=function(e){return{type:M.ADD_DEVICE,device:e}},q=function(e){return{type:M.ADD_PENDING_REQUEST,hostname:e}},U=function(e){return{type:M.APPEND_NETWORK_LOG,message:e}},W=function(){return{type:M.CLEAR_NETWORK_LOG}},H=function(e,t){return{type:M.CONTROL_DEVICE,hostname:e,settings:t}},K=function(e,t){return{type:M.EDIT_DEVICE,hostname:e,device:t}},Q=function(e){return{type:M.REMOVE_DEVICE,hostname:e}},F=function(e){return{type:M.REMOVE_PENDING_REQUEST,hostname:e}},J=function(e){return{type:M.SET_BRIGHTNESS,brightness:e}},X=function(e){return{type:M.SET_COLOR,color:e}},$={brightness:20,color:{r:0,g:0,b:0},devices:[],networkLog:[],pendingRequests:[]},z=n(96),Y=function(e){return e.application},Z=Object(z.a)(Y,(function(e){return e.brightness})),ee=Object(z.a)(Y,(function(e){return e.color})),te=Object(z.a)(Y,(function(e){return e.devices})),ne=Object(z.a)(Y,(function(e){return e.networkLog})),ae=Object(z.a)(Y,(function(e){return e.pendingRequests}));function re(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,c=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){l=!0,r=e},f:function(){try{c||null==a.return||a.return()}finally{if(l)throw r}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function le(){var e=Object(s.b)(),t=Object(s.c)(Z),n=Object(s.c)(ee),c=Object(s.c)(te),l=Object(s.c)(ae)||[],o=Object(a.useState)("all"),u=_()(o,2),i=u[0],m=u[1],p=Object(a.useState)([]),E=_()(p,2),f=E[0],b=E[1],d=Object(a.useCallback)((function(){var a=[];switch(i){case"all":a=c;break;case"some":a=c.filter((function(e){return f.includes(e.hostname)}))}var r,l=re(a);try{for(l.s();!(r=l.n()).done;){var o=r.value;e(H(o.hostname,{r:n.r,g:n.g,b:n.b,br:parseInt(t,10)}))}}catch(e){l.e(e)}finally{l.f()}}),[t,n,c,e,i,f]),h=Object(a.useCallback)((function(e){return m(e.target.value)}),[m]),v=Object(a.useCallback)((function(t){return e(J(t.target.value))}),[e]),y=Object(a.useCallback)((function(t){return e(X(t.rgb))}),[e]),w=Object(a.useCallback)((function(e){return b(D()(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value})))}),[b]),C="success";t>=200?C="danger":t>=160&&(C="warning");var S=l.length>0,R={disabled:S,icon:S?"spinner":"upload",spin:S,variant:S?"warning":"success"};return r.a.createElement(k.a,{className:"mt-2"},r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,null,"Update Settings"),r.a.createElement(P.a,null,r.a.createElement(g.a,null,r.a.createElement(j.a,{md:4},r.a.createElement(P.a.Group,{as:j.a},r.a.createElement(P.a.Label,null,"Device(s)"),r.a.createElement(g.a,null,r.a.createElement(j.a,null,r.a.createElement(P.a.Check,{type:"radio",inline:!0,name:"recipientType",value:"all",label:"All",checked:"all"===i,onChange:h}))),r.a.createElement(g.a,null,r.a.createElement(j.a,null,r.a.createElement(P.a.Check,{type:"radio",inline:!0,name:"recipientType",value:"some",label:"Some",checked:"some"===i,onChange:h}))),"some"===i?r.a.createElement(P.a.Control,{as:"select",multiple:!0,onChange:w,value:f},c.map((function(e){return r.a.createElement("option",{key:e.hostname,value:e.hostname},e.hostname)}))):null),r.a.createElement(P.a.Group,{as:j.a},r.a.createElement(P.a.Label,null,"Brightness"),r.a.createElement(x.a,null,r.a.createElement(P.a.Control,{className:"hew-range",type:"range",min:"0",max:"255",step:"5",value:t,onChange:v}),r.a.createElement(x.a.Append,null,r.a.createElement(x.a.Text,{className:"bg-".concat(C," text-dark")},Math.floor(t/255*100),"%"))),t>=160&&t<200?r.a.createElement("span",{className:"text-warning"},"Prolonged use at this power level will reduce lifespan."):null,t>=200?r.a.createElement("span",{className:"text-danger"},"Warning! Do not look directly at LEDs!"):null)),r.a.createElement(P.a.Group,{as:j.a,md:4},r.a.createElement(P.a.Label,null,"Color"),r.a.createElement(N.SketchPicker,{width:"90%",disableAlpha:!0,color:n,onChangeComplete:y})),r.a.createElement(j.a,{md:4},r.a.createElement(T.a,{disabled:R.disabled,variant:R.variant,onClick:d,block:!0,className:"hew-send","aria-label":"Send",title:"Send"},r.a.createElement(O.a,{icon:R.icon,spin:R.spin,size:"4x"})))))))}var oe=n(755);function se(){var e=Object(s.b)(),t=Object(s.c)(ne),n=Object(a.useCallback)((function(){return e(W())}),[e]);return r.a.createElement(k.a,{className:"my-4"},r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,null,r.a.createElement(g.a,null,r.a.createElement(j.a,{xs:11},"Network Log"),r.a.createElement(j.a,{xs:1,className:"text-right"},r.a.createElement(T.a,{variant:"warning","aria-label":"Clear",title:"Clear",onClick:n},r.a.createElement(O.a,{icon:"eraser"}))))),r.a.createElement(y.a,null,t.length?t.map((function(e){return r.a.createElement(g.a,{key:e.timestamp},r.a.createElement(j.a,{xs:2},Object(oe.a)(e.timestamp,"yyyy-MM-dd HH:mm:ss")),r.a.createElement(j.a,{xs:10},e.message))})):r.a.createElement(g.a,null,r.a.createElement(j.a,null,"No network log entries.")))))}function ue(){return r.a.createElement(y.a,null,r.a.createElement(w.a,{title:"Control"}),r.a.createElement(g.a,{className:"mt-4"},r.a.createElement(j.a,null,r.a.createElement("h1",null,r.a.createElement(O.a,{icon:"sliders-h"})," Control"))),r.a.createElement(le,null),r.a.createElement(se,null))}var ie=n(160);function me(){var e=Object(s.c)(te),t=Object(s.b)(),n=Object(a.useCallback)((function(e){var n=e.hostname,a=e.passphrase;t(B({hostname:"".concat(n,".local"),passphrase:a}))}),[t]),c=Object(a.useCallback)((function(t){var n=t.hostname,a=t.passphrase,r={};return n&&""!==n.trim()||(r.hostname="Hostname is required."),e.find((function(e){return e.hostname==="".concat(n,".local")}))&&(r.hostname="That device already exists."),a?a.length<8&&(r.passphrase="Passphrase must be at least eight characters."):r.passphrase="Passphrase is required.",r}),[e]);return r.a.createElement(k.a,{className:"my-4"},r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,null,"Add Device"),r.a.createElement(ie.a,{initialValues:{hostname:"",passphrase:""},validate:c,onSubmit:n},(function(e){var t=e.values,n=e.errors,a=e.touched,c=e.handleChange,l=e.handleBlur,o=e.handleSubmit;return r.a.createElement(P.a,null,r.a.createElement(P.a.Group,null,r.a.createElement(x.a,null,r.a.createElement(P.a.Control,{isInvalid:n.hostname,onChange:c,onBlur:l,name:"hostname",placeholder:"hostname",type:"text",value:t.hostname}),r.a.createElement(x.a.Append,null,r.a.createElement(x.a.Text,null,".local")),a.hostname&&n.hostname&&r.a.createElement(P.a.Control.Feedback,{type:"invalid"},n.hostname))),r.a.createElement(P.a.Group,null,r.a.createElement(P.a.Control,{isInvalid:n.passphrase,onChange:c,onBlur:l,name:"passphrase",type:"text",value:t.passphrase}),a.passphrase&&n.passphrase&&r.a.createElement(P.a.Control.Feedback,{type:"invalid"},n.passphrase)),r.a.createElement(T.a,{onClick:o,variant:"success"},r.a.createElement(O.a,{icon:"plus-circle"})," Add"))}))))}var pe=n(5),Ee=n.n(pe);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e){var t=e.device,n=t.hostname,c=t.passphrase,l=Object(s.b)(),o=Object(a.useState)(!1),u=_()(o,2),i=u[0],m=u[1],p=Object(a.useCallback)((function(){l(Q(n))}),[l,n]),E=Object(a.useCallback)((function(){return m(!i)}),[i,m]),f=Object(a.useCallback)((function(e){l(K(n,be(be({},t),{},{passphrase:e.passphrase}))),m(!1)}),[t,l,n,m]),b={passphrase:c},d=i?"outline-primary":"primary";return r.a.createElement(k.a,null,r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,null,r.a.createElement(g.a,null,r.a.createElement(j.a,null,n),r.a.createElement(j.a,{className:"text-right"},r.a.createElement(T.a,{variant:d,onClick:E},r.a.createElement(O.a,{icon:"edit"}))," ",r.a.createElement(T.a,{variant:"danger",onClick:p,title:"Delete"},r.a.createElement(O.a,{icon:"trash"})))),i&&r.a.createElement(ie.a,{onSubmit:f,validate:function(e){var t=e.passphrase,n={};return t?t.length<8&&(n.password="Passphrase must be at least eight characters."):n.password="Passphrase is required.",n},initialValues:b},(function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,c=e.handleSubmit;return r.a.createElement(P.a,null,r.a.createElement(P.a.Group,null,r.a.createElement(P.a.Label,null,"Passphrase"),r.a.createElement(P.a.Control,{onBlur:a,onChange:n,name:"passphrase",type:"text",value:t.passphrase})),r.a.createElement(T.a,{variant:"success",onClick:c},r.a.createElement(O.a,{icon:"save"})))})))))}function he(){var e=Object(s.c)(te),t=Array.isArray(e)&&e.length;return r.a.createElement(y.a,null,r.a.createElement(w.a,{title:"Devices"}),r.a.createElement(g.a,{className:"mt-4"},r.a.createElement(j.a,null,r.a.createElement("h1",null,r.a.createElement(O.a,{icon:"server"})," Devices"))),r.a.createElement(g.a,null,r.a.createElement(j.a,null,r.a.createElement(me,null))),t?r.a.createElement(g.a,null,e.map((function(e){return r.a.createElement(j.a,{key:e.hostname,sm:4},r.a.createElement(de,{device:e}))}))):null)}function Oe(){return r.a.createElement(a.Fragment,null,r.a.createElement(v,null),r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/"},r.a.createElement(ue,null)),r.a.createElement(b.a,{exact:!0,path:"/devices"},r.a.createElement(he,null))))}de.propTypes={device:Ee.a.shape({hostname:Ee.a.string.isRequired,passphrase:Ee.a.string.isRequired}).isRequired};var ve=n(61),ye=n.n(ve),ge=n(45),je=n(321),we=n.n(je),Ce=ye.a.mark(Pe),De=ye.a.mark(xe),Se=ye.a.mark(Ne);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e){var t,n,a,r,c;return ye.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.hostname,n=e.settings,l.prev=1,l.next=4,Object(ge.e)(te);case 4:if(a=l.sent,r=a.find((function(e){return e.hostname===t}))){l.next=8;break}throw new Error("Invalid device ".concat(t," specified"));case 8:return l.next=10,Object(ge.d)(U("Sending update to ".concat(t,"...")));case 10:return l.next=12,Object(ge.d)(q(t));case 12:return l.next=14,Object(ge.b)(we.a,{url:"http://".concat(t,"/"),method:"POST",data:ke(ke({},n),{},{p:r.passphrase})});case 14:return c=l.sent,l.next=17,Object(ge.d)(F(t));case 17:if(200===c.status){l.next=19;break}throw new Error(c.body);case 19:return l.next=21,Object(ge.d)(U("".concat(t," updated successfully!")));case 21:l.next=29;break;case 23:return l.prev=23,l.t0=l.catch(1),l.next=27,Object(ge.d)(U("Error updating ".concat(t,": ").concat(l.t0.message)));case 27:return l.next=29,Object(ge.d)(F(t));case 29:case"end":return l.stop()}}),Ce,null,[[1,23]])}function xe(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.f)(M.CONTROL_DEVICE,Pe);case 2:case"end":return e.stop()}}),De)}var Te={controlDeviceWatcher:xe};function Ne(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.a)(Object.values(Te).map((function(e){return e()})));case 2:case"end":return e.stop()}}),Se)}var Re=ye.a.mark(Ie);function Ie(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.c)(Ne);case 2:case"end":return e.stop()}}),Re)}var Ae=Object(i.c)({application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case M.ADD_PENDING_REQUEST:return e.pendingRequests.includes(t.hostname)?e:G(G({},e),{},{pendingRequests:[].concat(D()(e.pendingRequests),[t.hostname])});case M.REMOVE_PENDING_REQUEST:var n=D()(e.pendingRequests),a=n.findIndex((function(e){return e===t.hostname}));return-1===a?e:(n.splice(a,1),G(G({},e),{},{pendingRequests:n}));case M.APPEND_NETWORK_LOG:var r={message:t.message,timestamp:Date.now()},c=[r].concat(D()(e.networkLog)).slice(0,Math.min(20,e.networkLog.length+1));return G(G({},e),{},{networkLog:c});case M.CLEAR_NETWORK_LOG:return G(G({},e),{},{networkLog:[]});case M.ADD_DEVICE:var l=e.devices.find((function(e){return e.hostname===t.device.hostname}));return l?e:G(G({},e),{},{devices:[].concat(D()(e.devices),[t.device])});case M.EDIT_DEVICE:var o=D()(e.devices),s=e.devices.findIndex((function(e){return e.hostname===t.hostname}));return-1===s?e:(o.splice(s,1,t.device),G(G({},e),{},{devices:o}));case M.REMOVE_DEVICE:var u=D()(e.devices),i=e.devices.findIndex((function(e){return e.hostname===t.hostname}));return-1===i?e:(u.splice(i,1),G(G({},e),{},{devices:u}));case M.SET_BRIGHTNESS:return G(G({},e),{},{brightness:t.brightness});case M.SET_COLOR:return G(G({},e),{},{color:t.color});default:return e}}}),Le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,Ve=Object(u.a)(),Ge=Le(Object(i.a)(Ve),p()()),Me=Object(i.e)(Ae,{},Ge);Ve.run(Ie),l.a.render(r.a.createElement(o.a,null,r.a.createElement(s.a,{store:Me},r.a.createElement(Oe,null))),document.getElementById("root"));t.default=Oe}});